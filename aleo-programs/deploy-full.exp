#!/usr/bin/expect -f

set timeout 600
log_user 1

cd badge_minimal

spawn leo deploy --network testnet --broadcast

expect {
    "Do you want to continue?" {
        send "y\r"
        exp_continue
    }
    "Successfully deployed" {
        puts "\n\n‚úÖ DEPLOYMENT CONFIRMED!"
        exit 0
    }
    "Transaction broadcast" {
        puts "\n\nüì° Transaction broadcast, waiting for confirmation..."
        exp_continue
    }
    "Error" {
        puts "\n\n‚ùå ERROR DETECTED"
        exit 1
    }
    timeout {
        puts "\n\n‚è±Ô∏è  Timeout after 10 minutes"
        exit 1
    }
    eof {
        puts "\n\n‚ö†Ô∏è  Process ended"
        exit 0
    }
}
